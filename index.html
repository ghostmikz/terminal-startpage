<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ghostmikz ~/</title>
    <link rel="preload" as="image" href="./assets/bg-terminal.jpg">
    <link rel="icon" type="image/png" href="./assets/favicon.png">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #000 url('./assets/bg-terminal.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: "Fira Code", monospace;
        }
        .rounded-box {
            width: 700px;
            padding: 30px;
            background-color: rgba(255, 255, 255, 0.16);
            border-radius: 10px;
            backdrop-filter: blur(16px);
            box-shadow: 0 0 5px rgba(0,0,0,.145), 0 0 25px rgba(0,0,0,.145), 0 0 50px rgba(0,0,0,.145), 0 0 200px rgba(0,0,0,.145);
            color: #333;
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
        }
        .content { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding-bottom: 30px; }
        .subtext { cursor: pointer; transition: opacity 0.2s, color 0.2s; color: white; }
        .subtext:hover, .subtext.selected { color: #90EE90; }
        .subtext.dimmed { opacity: 0.3; }
        
        .input-container { display: flex; align-items: center; position: absolute; bottom: 10px; left: 10px; right: 10px; font-size: 14px; font-family: "Fira Code", monospace; letter-spacing: 2px; }
        .prompt { margin-right: 5px; letter-spacing: 2px; }
        .prompt .user { color: #B62ED8; }
        .prompt .at { color: #97989D; }
        .prompt .browser { color: #AFF8B4; }
        .prompt .arrow { color: #B62ED8; }
        
        .text-area { flex-grow: 1; background-color: transparent; border: none; color: white; font-size: 14px; font-family: "Fira Code", monospace; outline: none; caret-color: #B62ED8; letter-spacing: 2px; }
        
        .category { text-transform: capitalize; margin-bottom: 5px; }
        .category.general { color: #2ED8A2; }
        .category.coding { color: #D1AFF8; }
        .category.dev { color: #62E0E2; }
        .category.personal { color: #F8B44A; }
    </style>
</head>
<body>
    <div class="rounded-box">
        <div class="content" id="link-container"></div>
        <div class="input-container">
            <span class="prompt">
                <span class="user">ghostmikz</span><span class="at">@</span><span class="browser">browser</span> <span class="arrow">‚ùØ</span>
            </span>
            <input type="text" class="text-area" placeholder="command..." autofocus spellcheck="false">
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const input = document.querySelector(".text-area");
            const container = document.getElementById("link-container");
            let selectedIndex = -1;

            const siteData = [
                { cat: "general", links: [
                    { name: "üé¨ YouTube", url: "https://www.youtube.com/", alias: ["yt"] },
                    { name: "üì∏ Instagram", url: "https://www.instagram.com/", alias: ["ig"] },
                    { name: "üåê Facebook", url: "https://www.facebook.com/", alias: ["fb"] },
                    { name: "ü§ñ Reddit", url: "https://www.reddit.com/", alias: ["r"] }
                ]},
                { cat: "personal", links: [
                    { name: "‚å®Ô∏è Monkeytype", url: "https://monkeytype.com/", alias: ["mt"] },
                    { name: "üéß Spotify", url: "https://spotify.com", alias: ["sp"] },
                    { name: "üé® Pinterest", url: "https://www.pinterest.com/", alias: ["pin"] },
                    { name: "üìÅ FMHY", url: "https://fmhy.net/", alias: ["fm"] }
                ]},
                { cat: "coding", links: [
                    { name: "‚öîÔ∏è LeetCode", url: "https://leetcode.com/", alias: ["lc"] },
                    { name: "üèÜ Codeforces", url: "https://codeforces.com/", alias: ["cf"] },
                    { name: "üì¶ CodePen", url: "https://codepen.io/", alias: ["cp"] },
                    { name: "üìä CSES", url: "https://cses.fi/", alias: ["cses"] }
                ]},
                { cat: "dev", links: [
                    { name: "üêô GitHub", url: "https://github.com/", alias: ["gh"] },
                    { name: "‚ú® Gemini", url: "https://gemini.google.com/", alias: ["gem"] },
                    { name: "üß† ChatGPT", url: "https://chatgpt.com/", alias: ["gpt"] },
                    { name: "üìö StackOverflow", url: "https://stackoverflow.com/", alias: ["so"] }
                ]}
            ];

            // Setup UI
            container.innerHTML = siteData.map(group => `
                <div class="column">
                    <div class="category ${group.cat}">${group.cat}</div>
                    ${group.links.map(l => `
                        <div class="subtext" data-url="${l.url}" data-alias='${JSON.stringify(l.alias)}'>
                            ${l.name}
                        </div>`).join('')}
                </div>
            `).join('');

            const items = document.querySelectorAll(".subtext");

            const filterItems = (query) => {
                const q = query.toLowerCase().trim();
                selectedIndex = -1;
                items.forEach(item => {
                    const name = item.textContent.toLowerCase();
                    const aliases = JSON.parse(item.dataset.alias);
                    const match = !q || name.includes(q) || aliases.some(a => a.includes(q));
                    item.classList.toggle("dimmed", !match);
                    item.classList.remove("selected");
                });
            };

            const updateSelection = (visible) => {
                items.forEach(i => i.classList.remove("selected"));
                if (selectedIndex >= 0 && visible[selectedIndex]) {
                    visible[selectedIndex].classList.add("selected");
                }
            };

            input.addEventListener("input", e => filterItems(e.target.value));

            document.addEventListener("keydown", e => {
                if (document.activeElement !== input && e.key.length === 1) input.focus();

                const visible = Array.from(items).filter(i => !i.classList.contains("dimmed"));

                if (e.key === "ArrowDown") {
                    e.preventDefault();
                    if (visible.length > 0) {
                        selectedIndex = (selectedIndex + 1) % visible.length;
                        updateSelection(visible);
                    }
                } 
                else if (e.key === "ArrowUp") {
                    e.preventDefault();
                    if (visible.length > 0) {
                        selectedIndex = (selectedIndex - 1 + visible.length) % visible.length;
                        updateSelection(visible);
                    }
                } 
                else if (e.key === "Enter") {
                    const val = input.value.trim();
                    if (!val && selectedIndex === -1) return;

                    let targetUrl = `https://www.google.com/search?q=${encodeURIComponent(val)}`;

                    if (selectedIndex >= 0 && visible[selectedIndex]) {
                        targetUrl = visible[selectedIndex].dataset.url;
                    } else {
                        const lowVal = val.toLowerCase();
                        siteData.forEach(g => g.links.forEach(l => {
                            if (l.alias.includes(lowVal)) targetUrl = l.url;
                        }));
                    }

                    // Navigate current tab
                    window.location.href = targetUrl;
                }
            });

            // Handle clicks to also use current tab
            container.addEventListener("click", e => {
                const item = e.target.closest(".subtext");
                if (item) window.location.href = item.dataset.url;
            });
        });

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').catch(() => {});
            });
        }
    </script>
</body>
</html>